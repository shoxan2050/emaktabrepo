<!doctype html>
<html lang="uz">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Dars jadvali ‚Äî E-Maktab</title>
<style>
  :root{--bg:#1e1e1e;--card:#2a2a2a;--card-hover:#333;--text:#eaf0ff;--muted:#9aa4b2;--accent:#2b6df6;}
  *{box-sizing:border-box;margin:0;padding:0;}
  body{font-family:Inter,Arial,sans-serif;background:var(--bg);color:var(--text);padding:28px 20px 140px;display:flex;flex-direction:column;align-items:center;min-height:100vh;}
 
  .fade-line{opacity:0;transform:translateY(8px);text-align:center;animation:fadeInUp .7s forwards;}
  .fade-1{animation-delay:.2s;font-size:26px;font-weight:700;margin:6px 0;}
  .fade-2{animation-delay:.9s;font-size:20px;color:var(--muted);}
  .fade-3{animation-delay:1.6s;font-size:18px;color:var(--muted);}
  @keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}

  .card{width:100%;max-width:620px;background:var(--card);border-radius:16px;padding:20px;margin-top:34px;box-shadow:0 8px 28px rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.02);opacity:0;transform:translateY(12px);animation:cardAppear .7s 2.4s forwards;}
  @keyframes cardAppear{to{opacity:1;transform:translateY(0)}}

  .card h2{text-align:center;margin-bottom:12px;font-size:20px;}
  .row{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-radius:14px;margin-bottom:10px;transition:all .2s;cursor:pointer;}
  .row:hover{background:var(--card-hover);transform:scale(1.02);box-shadow:0 8px 18px rgba(0,0,0,.5);}
  .row.disabled{opacity:.55;cursor:default;}
  .row.disabled:hover{transform:none;background:transparent;}
  .left{gap:4px;display:flex;flex-direction:column;}
  .num{font-weight:700;font-size:15px;}
  .sub{font-weight:600;color:#dfe7f7;font-size:14px;}
  .time{color:var(--muted);font-size:13px;}
  .rightLabel{color:var(--muted);font-size:13px;min-width:120px;text-align:right;}

  /* Faqat 2 ta tugma ‚Äî kengroq va chiroyli */
  .bottom-bar{
    position:fixed;bottom:0;left:0;right:0;
    background:rgba(30,30,30,.95);backdrop-filter:blur(12px);
    padding:12px 20px;display:flex;gap:16px;z-index:999;
    border-top:1px solid rgba(255,255,255,.05);
  }
  .nav-btn{
    flex:1;background:var(--card);color:var(--text);border:none;
    padding:18px 12px;border-radius:18px;font-size:16px;font-weight:700;
    cursor:pointer;transition:all .25s;display:flex;flex-direction:column;
    align-items:center;gap:8px;box-shadow:0 4px 15px rgba(0,0,0,.4);
  }
  .nav-btn:hover{transform:translateY(-4px);background:var(--card-hover);}
  .nav-btn span{font-size:28px;}

  @media(max-width:480px){
    .nav-btn{font-size:15px;padding:16px 8px;}
    .nav-btn span{font-size:24px;}
  }
</style>
</head>
<body>

<div id="line1" class="fade-line fade-1">‚Äî</div>
<div id="line2" class="fade-line fade-2">‚Äî</div>
<div id="line3" class="fade-line fade-3">‚Äî</div>

<div class="card" id="todayCard">
  <h2>Bugungi dars jadvali</h2>
  <div id="rowsContainer"></div>
</div>

<!-- Faqat 2 ta tugma qoldirdim -->
<div class="bottom-bar">
  <button class="nav-btn" onclick="window.open('https://emaktab.uz/teachers','_blank')">
    <span>üè†</span> Bosh ekran
  </button>
  <button class="nav-btn" id="hisobotBtn">
    <span>üìä</span> Hisobot
  </button>
</div>

<script>
const journalLinks = {
  "6A|ONA TILI":"https://emaktab.uz/journal/school/1000005977908/group/2388005413423903573/subject/1871705191453506349?periodId=2392904064143140032&subGroupId=",
  "6A|ADABIYOT":"https://emaktab.uz/journal/school/1000005977908/group/2388005413423903573/subject/1817016797347913127?periodId=2392904064143140032&subGroupId=",
  "6A|KELAJAK":"https://emaktab.uz/journal/school/1000005977908/group/2388005413423903573/subject/2395074680484989271?periodId=2392904064143140032&subGroupId=",
  "6B|ONA TILI":"https://emaktab.uz/journal/school/1000005977908/group/2388004936682533712/subject/1871705191453506349?periodId=2392904064143140032&subGroupId=",
  "6B|ADABIYOT":"https://emaktab.uz/journal/school/1000005977908/group/2388004936682533712/subject/1817016797347913127?periodId=2392904064143140032&subGroupId=",
  "7A|ONA TILI":"https://emaktab.uz/journal/school/1000005977908/group/2388004520070705999/subject/1871705191453506349?periodId=2392904064143140032&subGroupId=",
  "7A|ADABIYOT":"https://emaktab.uz/journal/school/1000005977908/group/2388004520070705999/subject/1817016797347913127?periodId=2392904064143140032&subGroupId=",
  "9|ONA TILI":"https://emaktab.uz/journal/school/1000005977908/group/2388001994629935936/subject/1871705191453506349?periodId=2392904064143140032&planningPeriodId=2392904064143140032&source=schedule_widget&subGroupId=",
  "9|ADABIYOT":"https://emaktab.uz/journal/school/1000005977908/group/2388001994629935936/subject/1817016797347913127?periodId=2392904064143140032&planningPeriodId=2392904064143140032&source=schedule_widget&subGroupId=",
  "11|ONA TILI":"https://emaktab.uz/journal/school/1000005977908/group/2388000766269289205/subject/1871705191453506349?periodId=2392904064143140032&subGroupId=",
  "11|ADABIYOT":"https://emaktab.uz/journal/school/1000005977908/group/2388000766269289205/subject/1817016797347913127?periodId=2392904064143140032&subGroupId="
};

const week = {
  "Dushanba":[
    {num:1,cls:"6A",sub:"Kelajak soati",subjKey:"KELAJAK",time:"8:30 - 9:15"},
    {num:2,cls:"9",sub:"Ona tili",subjKey:"ONA TILI",time:"9:20 - 10:05"},
    {num:3,cls:"6B",sub:"Ona tili",subjKey:"ONA TILI",time:"10:10 - 10:55"},
    {num:4,cls:"7A",sub:"Ona tili",subjKey:"ONA TILI",time:"11:10 - 11:55"},
    {num:5,empty:true},
    {num:6,cls:"6A",sub:"Adabiyot",subjKey:"ADABIYOT",time:"12:50 - 13:35"}
  ],
  "Seshanba":[{num:1,empty:true},{num:2,empty:true},{num:3,empty:true},{num:4,empty:true},{num:5,empty:true},{num:6,empty:true}],
  "Chorshanba":[{num:1,cls:"9",sub:"Ona tili",subjKey:"ONA TILI",time:"8:30 - 9:15"},{num:2,cls:"6B",sub:"Ona tili",subjKey:"ONA TILI",time:"9:20 - 10:05"},{num:3,cls:"11",sub:"Ona tili",subjKey:"ONA TILI",time:"10:10 - 10:55"},{num:4,cls:"7A",sub:"Ona tili",subjKey:"ONA TILI",time:"11:10 - 11:55"},{num:5,cls:"6A",sub:"Ona tili",subjKey:"ONA TILI",time:"12:00 - 12:45"},{num:6,empty:true}],
  "Payshanba":[{num:1,cls:"11",sub:"Adabiyot",subjKey:"ADABIYOT",time:"8:30 - 9:15"},{num:2,empty:true},{num:3,cls:"6A",sub:"Ona tili",subjKey:"ONA TILI",time:"10:10 - 10:55"},{num:4,cls:"9",sub:"Ona tili",subjKey:"ONA TILI",time:"11:10 - 11:55"},{num:5,cls:"6B",sub:"Ona tili",subjKey:"ONA TILI",time:"12:00 - 12:45"},{num:6,cls:"7A",sub:"Adabiyot",subjKey:"ADABIYOT",time:"12:50 - 13:35"}],
  "Juma":[{num:1,cls:"6A",sub:"Ona tili",subjKey:"ONA TILI",time:"8:30 - 9:15"},{num:2,cls:"7A",sub:"Ona tili",subjKey:"ONA TILI",time:"9:20 - 10:05"},{num:3,cls:"6B",sub:"Ona tili",subjKey:"ONA TILI",time:"10:10 - 10:55"},{num:4,cls:"9",sub:"Ona tili",subjKey:"ONA TILI",time:"11:10 - 11:55"},{num:5,cls:"11",sub:"Adabiyot",subjKey:"ADABIYOT",time:"12:00 - 12:45"},{num:6,empty:true}],
  "Shanba":[{num:1,cls:"11",sub:"Adabiyot",subjKey:"ADABIYOT",time:"8:30 - 9:15"},{num:2,cls:"6A",sub:"Ona tili",subjKey:"ONA TILI",time:"9:20 - 10:05"},{num:3,cls:"6A",sub:"Adabiyot",subjKey:"ADABIYOT",time:"10:10 - 10:55"},{num:4,cls:"9",sub:"Adabiyot",subjKey:"ADABIYOT",time:"11:10 - 11:55"},{num:5,cls:"7A",sub:"Adabiyot",subjKey:"ADABIYOT",time:"12:00 - 12:45"},{num:6,empty:true}]
};

function renderToday(){
  const now = new Date();
  const dd = now.getDate();
  const yyyy = now.getFullYear();
  const jsDay = now.getDay();
  const days = {1:"Dushanba",2:"Seshanba",3:"Chorshanba",4:"Payshanba",5:"Juma",6:"Shanba",0:"Yakshanba"};
  const todayKey = days[jsDay];

  document.getElementById('line1').textContent = `Bugun sana: ${dd}-noyabr ${yyyy} ‚Äî ${todayKey}`;
  document.getElementById('line2').textContent = `Bugun haftaning: ${todayKey} kuni`;

  const lessons = week[todayKey] || [];
  const count = lessons.filter(l => !l.empty).length;
  document.getElementById('line3').textContent = `Bugun ${count} ta dars mavjud`;

  const c = document.getElementById('rowsContainer');
  c.innerHTML = '';
  if(count===0){
    c.innerHTML = '<div style="text-align:center;padding:50px;color:var(--muted);font-size:19px">Bugun dars yo\'q üò¥</div>';
    return;
  }

  lessons.forEach(ls => {
    if(ls.empty){
      c.innerHTML += `<div class="row disabled"><div class="left"><div class="num">${ls.num}. dars yo'q</div></div></div>`;
    } else {
      const key = `${ls.cls}|${ls.subjKey}`;
      const link = journalLinks[key] || null;
      const div = document.createElement('div');
      div.className = 'row';
      div.innerHTML = `<div class="left"><div class="num">${ls.num}. ${ls.cls} ‚Ä∫</div><div class="sub">${ls.sub}</div><div class="time">${ls.time}</div></div><div class="rightLabel">${link?'üìò Jurnal ‚ñ∏':''}</div>`;
      if(link) div.onclick = () => window.open(link,'_blank');
      c.appendChild(div);
    }
  });
}
renderToday();

// Hisobot tugmasi
document.getElementById('hisobotBtn').onclick = () => {
  const t = new Date();
  const d = String(t.getDate()).padStart(2,'0');
  const m = String(t.getMonth()+1).padStart(2,'0');
  const y = t.getFullYear();
  window.open(`https://schools.emaktab.uz/v2/reports/default?school=1000005977908&year=2025&report=statJournal-subjectteacher&dateFrom=${d}.${m}.${y}&dateTo=${d}.${m}.${y}&teacher=1000010096961`,'_blank');
};
</script>
</body>
</html>
