<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eâ€‘Maktab Dashboard</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #0f0f0f;
            color: #fff;
        }
        header {
            text-align: center;
            padding: 30px;
            font-size: 32px;
            font-weight: bold;
            background: #111;
            letter-spacing: 1px;
        }
        .container {
            max-width: 480px;
            margin: 40px auto;
            padding: 20px;
        }
        .btn {
            display: block;
            padding: 18px;
            margin: 12px 0;
            background: #1a1a1a;
            border-radius: 14px;
            text-align: center;
            font-size: 20px;
            text-decoration: none;
            color: #fff;
            transition: 0.25s;
            border: 1px solid #333;
        }
        .btn:hover {
            background: #262626;
        }
        .section {
            display: none;
        }
        .active {
            display: block;
        }
        .back {
            margin-top: 25px;
            background: #333;
        }
    </style>
</head>
<body>

<header>Eâ€‘Maktab Dashboard</header>

<div class="container">

    <!-- MAIN MENU -->
    <div id="main" class="section active">
        <a class="btn" href="#" onclick="openSection('uygavazifa')">ğŸ§‘â€ğŸ“ UYGA VAZIFA</a>
        <a class="btn" id="hisobot" target="_blank">ğŸ“Š HISOBOTLAR</a>
        <a class="btn" href="https://emaktab.uz/teachers" target="_blank">ğŸ  BOSH EKRAN</a>
        <a class="btn" href="#" onclick="openSection('jurnallar')">ğŸ““ JURNALLAR</a>
    </div>

    <!-- UYGA VAZIFA -->
    <div id="uygavazifa" class="section">
        <a class="btn" onclick="openClasses('ona')">ğŸ‡ºğŸ‡¿ ONA TILI</a>
        <a class="btn" onclick="openClasses('adabiyot')">ğŸ“– ADABIYOT</a>
        <a class="btn back" onclick="openSection('main')">ğŸ”™ ORQAGA</a>
    </div>

    <!-- SUBJECT CLASSES -->
    <div id="classes" class="section"></div>

    <!-- JURNALLAR CLASSES -->
    <div id="jurnallar" class="section">
        <a class="btn" onclick="openJurnalFan('9')">ğŸ““ 9</a>
        <a class="btn" onclick="openJurnalFan('7A')">ğŸ““ 7A</a>
        <a class="btn" onclick="openJurnalFan('11')">ğŸ““ 11</a>
        <a class="btn" onclick="openJurnalFan('6A')">ğŸ““ 6A</a>
        <a class="btn" onclick="openJurnalFan('6B')">ğŸ““ 6B</a>
        <a class="btn back" onclick="openSection('main')">ğŸ”™ ORQAGA</a>
    </div>

    <!-- JURNAL FANLAR -->
    <div id="jurnalFanPage" class="section"></div>

</div>

<script>
function today() {
    const t = new Date();
    let dd = String(t.getDate()).padStart(2, "0");
    let mm = String(t.getMonth() + 1).padStart(2, "0");
    let yyyy = t.getFullYear();
    return {dd, mm, yyyy};
}

function openSection(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

const groups = {
    "6A": "2388005413423903573",
    "6B": "2388004936682533712",
    "7A": "2388004520070705999",
    "9":  "2388001994629935936",
    "11": "2388000766269289205"
};

const subjects = {
    adabiyot: "1817016797347913127",
    ona: "1871705191453506349",
    kelajak: "2395074680484989271"
};

function openClasses(type) {
    const {dd, mm, yyyy} = today();
    let order = type === "adabiyot" ? ["6A","6B","7A","9","11"] : ["11","9","6A","6B","7A"];

    let html = "";
    order.forEach(cls => {
        let link = `https://schools.emaktab.uz/v2/homework?school=1000005977908&tab=&studyYear=2025&group=${groups[cls]}&subject=${subjects[type]}&teacher=1000010096961&datefrom=${dd}%2F${mm}%2F${yyyy}&dateto=${dd}%2F${mm}%2F${yyyy}&choose=Topish`;
        html += `<a class='btn' target='_blank' href='${link}'>ğŸ“š ${cls}</a>`;
    });
    html += `<a class='btn back' onclick="openSection('uygavazifa')">ğŸ”™ ORQAGA</a>`;

    document.getElementById("classes").innerHTML = html;
    openSection("classes");
}

function getJurnalUrl(group, subject) {
    let base = `https://emaktab.uz/journal/school/1000005977908/group/${group}/subject/${subject}?periodId=2392904064143140032`;
    if (group === "2388001994629935936") base += "&planningPeriodId=2392904064143140032&source=schedule_widget";
    return base + "&subGroupId=";
}

function openJurnalFan(cls) {
    let g = groups[cls];
    let html = ``;

    html += `<a class='btn' target='_blank' href='${getJurnalUrl(g, subjects.ona)}'>ğŸ‡ºğŸ‡¿ ONA TILI</a>`;
    html += `<a class='btn' target='_blank' href='${getJurnalUrl(g, subjects.adabiyot)}'>ğŸ“– ADABIYOT</a>`;

    if (cls === "6A")
        html += `<a class='btn' target='_blank' href='${getJurnalUrl(g, subjects.kelajak)}'>â° KELAJAK SOATI</a>`;

    html += `<a class='btn back' onclick="openSection('jurnallar')">ğŸ”™ ORQAGA</a>`;

    document.getElementById("jurnalFanPage").innerHTML = html;
    openSection("jurnalFanPage");
}

// HISOBOTLAR LINKINI DINAMIK QILISH
(function updateHisobot() {
    const {dd, mm, yyyy} = today();
    let link = `https://schools.emaktab.uz/v2/reports/default?school=1000005977908&year=2025&report=statJournal-subjectteacher&dateFrom=${dd}.${mm}.${yyyy}&dateTo=${dd}.${mm}.${yyyy}&teacher=1000010096961`;
    document.getElementById("hisobot").href = link;
})();
</script>

</body>
</html>
