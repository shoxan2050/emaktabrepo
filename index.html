<!doctype html>
<html lang="uz">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dars jadvali â€” E-Maktab</title>
<style>
  :root{
    --bg:#1e1e1e;
    --card:#2a2a2a;
    --card-hover:#333;
    --text:#eaf0ff;
    --muted:#9aa4b2;
    --accent:#2b6df6;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: Inter, "Helvetica Neue", Arial, sans-serif;
    background:var(--bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:28px;
    display:flex;
    align-items:center;
    flex-direction:column;
    min-height:100vh;
  }

  /* header text (fade lines) */
  .fade-line{
    opacity:0;
    transform: translateY(8px);
    text-align:center;
    will-change: opacity, transform;
  }
  .fade-1{ animation: fadeInUp .7s .2s forwards; font-size:26px; margin-top:6px; font-weight:700; }
  .fade-2{ animation: fadeInUp .7s .9s forwards; font-size:20px; margin-top:10px; color:var(--muted); }
  .fade-3{ animation: fadeInUp .7s 1.6s forwards; font-size:18px; margin-top:8px; color:var(--muted); }

  @keyframes fadeInUp {
    to { opacity:1; transform:translateY(0); }
  }

  /* card */
  .card {
    width:100%;
    max-width:620px;
    background:var(--card);
    border-radius:16px;
    padding:20px;
    margin-top:34px;
    box-shadow: 0 8px 28px rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.02);
    opacity:0;
    transform: translateY(12px);
    animation: cardAppear .7s 2.4s forwards;
  }
  @keyframes cardAppear { to { opacity:1; transform:translateY(0); } }

  .card h2 { margin:0 0 12px 0; text-align:center; font-size:20px; }
  .table { width:100%; border-collapse:collapse; }
  .row {
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:12px 14px;
    border-radius:12px;
    margin-bottom:10px;
    background:transparent;
    transition: transform .18s ease, background .18s ease, box-shadow .18s ease;
    cursor:pointer;
    border:1px solid transparent;
  }
  .row .left { display:flex; flex-direction:column; gap:4px; }
  .row .num { font-weight:700; color:var(--text); font-size:15px; }
  .row .sub { color:#dfe7f7; font-weight:600; font-size:14px; }
  .row .time { color:var(--muted); font-size:13px; margin-top:4px; }

  .row:hover {
    transform: scale(1.02);
    background: var(--card-hover);
    box-shadow: 0 8px 18px rgba(0,0,0,0.5);
    border-color: rgba(255,255,255,0.03);
  }

  .row.disabled {
    opacity:0.55;
    cursor:default;
    transform:none;
  }

  /* small label on right */
  .rightLabel{ color:var(--muted); font-size:13px; padding-left:12px; min-width:120px; text-align:right; }

  /* responsive */
  @media (max-width:640px){
    .card{ padding:16px; }
    .row{ padding:10px; }
    .rightLabel{ min-width:90px; font-size:12px; }
  }
</style>
</head>
<body>

  <div id="line1" class="fade-line fade-1">â€”</div>
  <div id="line2" class="fade-line fade-2">â€”</div>
  <div id="line3" class="fade-line fade-3">â€”</div>

  <div class="card" id="todayCard" aria-live="polite">
    <h2>Bugungi dars jadvali</h2>
    <div id="rowsContainer">
      <!-- rows will be inserted here -->
    </div>
  </div>

<script>
/* =========================
   Link mapping (siz bergan aniq linklar)
   Format: "CLASS|SUBJECTKEY" => URL
   SUBJECTKEY expected: "ONA TILI", "ADABIYOT", "KELAJAK"
   ========================= */
const journalLinks = {
  "6A|ONA TILI": "https://emaktab.uz/journal/school/1000005977908/group/2388005413423903573/subject/1871705191453506349?periodId=2392904064143140032&subGroupId=",
  "6A|ADABIYOT": "https://emaktab.uz/journal/school/1000005977908/group/2388005413423903573/subject/1817016797347913127?periodId=2392904064143140032&subGroupId=",
  "6A|KELAJAK": "https://emaktab.uz/journal/school/1000005977908/group/2388005413423903573/subject/2395074680484989271?periodId=2392904064143140032&subGroupId=",

  "6B|ONA TILI": "https://emaktab.uz/journal/school/1000005977908/group/2388004936682533712/subject/1871705191453506349?periodId=2392904064143140032&subGroupId=",
  "6B|ADABIYOT": "https://emaktab.uz/journal/school/1000005977908/group/2388004936682533712/subject/1817016797347913127?periodId=2392904064143140032&subGroupId=",

  "7A|ONA TILI": "https://emaktab.uz/journal/school/1000005977908/group/2388004520070705999/subject/1871705191453506349?periodId=2392904064143140032&subGroupId=",
  "7A|ADABIYOT": "https://emaktab.uz/journal/school/1000005977908/group/2388004520070705999/subject/1817016797347913127?periodId=2392904064143140032&subGroupId=",

  "9|ONA TILI": "https://emaktab.uz/journal/school/1000005977908/group/2388001994629935936/subject/1871705191453506349?periodId=2392904064143140032&planningPeriodId=2392904064143140032&source=schedule_widget&subGroupId=",
  "9|ADABIYOT": "https://emaktab.uz/journal/school/1000005977908/group/2388001994629935936/subject/1817016797347913127?periodId=2392904064143140032&planningPeriodId=2392904064143140032&source=schedule_widget&subGroupId=",

  "11|ONA TILI": "https://emaktab.uz/journal/school/1000005977908/group/2388000766269289205/subject/1871705191453506349?periodId=2392904064143140032&subGroupId=",
  "11|ADABIYOT": "https://emaktab.uz/journal/school/1000005977908/group/2388000766269289205/subject/1817016797347913127?periodId=2392904064143140032&subGroupId="
};

/* =========================
   Haftalik jadval (rasmdagi tartib)
   Har kuni 6 slot (1..6), empty:true -> dars yo'q
   ========================= */
const week = {
  "Dushanba":[
    {num:1, cls:"6A", sub:"Kelajak soati", subjKey:"KELAJAK", time:"8:30 - 9:15"},
    {num:2, cls:"9", sub:"Ona tili", subjKey:"ONA TILI", time:"9:20 - 10:05"},
    {num:3, cls:"6B", sub:"Ona tili", subjKey:"ONA TILI", time:"10:10 - 10:55"},
    {num:4, cls:"7A", sub:"Ona tili", subjKey:"ONA TILI", time:"11:10 - 11:55"},
    {num:5, empty:true},
    {num:6, cls:"6A", sub:"Adabiyot", subjKey:"ADABIYOT", time:"12:50 - 13:35"}
  ],
  "Seshanba":[
    {num:1, empty:true},{num:2, empty:true},{num:3, empty:true},{num:4, empty:true},{num:5, empty:true},{num:6, empty:true}
  ],
  "Chorshanba":[
    {num:1, cls:"9", sub:"Ona tili", subjKey:"ONA TILI", time:"8:30 - 9:15"},
    {num:2, cls:"6B", sub:"Ona tili", subjKey:"ONA TILI", time:"9:20 - 10:05"},
    {num:3, cls:"11", sub:"Ona tili", subjKey:"ONA TILI", time:"10:10 - 10:55"},
    {num:4, cls:"7A", sub:"Ona tili", subjKey:"ONA TILI", time:"11:10 - 11:55"},
    {num:5, cls:"6A", sub:"Ona tili", subjKey:"ONA TILI", time:"12:00 - 12:45"},
    {num:6, empty:true}
  ],
  "Payshanba":[
    {num:1, cls:"11", sub:"Adabiyot", subjKey:"ADABIYOT", time:"8:30 - 9:15"},
    {num:2, empty:true},
    {num:3, cls:"6A", sub:"Ona tili", subjKey:"ONA TILI", time:"10:10 - 10:55"},
    {num:4, cls:"9", sub:"Ona tili", subjKey:"ONA TILI", time:"11:10 - 11:55"},
    {num:5, cls:"6B", sub:"Ona tili", subjKey:"ONA TILI", time:"12:00 - 12:45"},
    {num:6, cls:"7A", sub:"Adabiyot", subjKey:"ADABIYOT", time:"12:50 - 13:35"}
  ],
  "Juma":[
    {num:1, cls:"6A", sub:"Ona tili", subjKey:"ONA TILI", time:"8:30 - 9:15"},
    {num:2, cls:"7A", sub:"Ona tili", subjKey:"ONA TILI", time:"9:20 - 10:05"},
    {num:3, cls:"6B", sub:"Ona tili", subjKey:"ONA TILI", time:"10:10 - 10:55"},
    {num:4, cls:"9", sub:"Ona tili", subjKey:"ONA TILI", time:"11:10 - 11:55"},
    {num:5, cls:"11", sub:"Adabiyot", subjKey:"ADABIYOT", time:"12:00 - 12:45"},
    {num:6, empty:true}
  ],
  "Shanba":[
    {num:1, cls:"11", sub:"Adabiyot", subjKey:"ADABIYOT", time:"8:30 - 9:15"},
    {num:2, cls:"6A", sub:"Ona tili", subjKey:"ONA TILI", time:"9:20 - 10:05"},
    {num:3, cls:"6A", sub:"Adabiyot", subjKey:"ADABIYOT", time:"10:10 - 10:55"},
    {num:4, cls:"9", sub:"Adabiyot", subjKey:"ADABIYOT", time:"11:10 - 11:55"},
    {num:5, cls:"7A", sub:"Adabiyot", subjKey:"ADABIYOT", time:"12:00 - 12:45"},
    {num:6, empty:true}
  ]
};

/* Uzbek month and weekday names */
const monthNames = ['yanvar','fevral','mart','aprel','may','iyun','iyul','avgust','sentyabr','noyabr','dekabr'];
const weekNames = {1:'Dushanba',2:'Seshanba',3:'Chorshanba',4:'Payshanba',5:'Juma',6:'Shanba',0:'Yakshanba'};

/* pick today's lessons and render only today's column */
function renderToday(){
  const now = new Date();
  const dd = now.getDate();
  const mm = now.getMonth(); // 0-based
  const yyyy = now.getFullYear();
  const jsDay = now.getDay(); // 0 sun ... 6 sat
  // map JS day to our week keys: JS Mon=1 -> Dushanba
  const map = {1:'Dushanba',2:'Seshanba',3:'Chorshanba',4:'Payshanba',5:'Juma',6:'Shanba',0:'Seshanba'}; // treat sunday as sesh (no lessons)
  const todayKey = map[jsDay] || 'Dushanba';
  const humanWeek = weekNames[jsDay] || 'Kun';
  // set header lines (fade lines)
  const line1 = document.getElementById('line1');
  const line2 = document.getElementById('line2');
  const line3 = document.getElementById('line3');
  // format: 15-noyabr â€” Shanba   (noyabr in uz)
  const monthUz = 'noyabr'; // we keep 'noyabr' for consistency with images
  line1.textContent = `Bugun sana: ${dd}-${monthUz} ${yyyy} â€” ${humanWeek}`;
  // second and third lines (fade in as style already)
  line2.textContent = `Bugun haftaning: ${humanWeek} kuni`;
  const lessons = week[todayKey] || [];
  const count = lessons.filter(l => l && !l.empty).length;
  line3.textContent = `Bugun ${count} ta dars mavjud`;

  // render rows
  const rowsContainer = document.getElementById('rowsContainer');
  rowsContainer.innerHTML = '';
  // if sunday or no lessons -> show info
  if(count === 0){
    const info = document.createElement('div');
    info.style.color = 'var(--muted)';
    info.style.textAlign = 'center';
    info.style.padding = '18px';
    info.textContent = 'Bugun dars yo\'q';
    rowsContainer.appendChild(info);
    return;
  }

  lessons.forEach((ls)=>{
    if(ls && ls.empty){
      const div = document.createElement('div');
      div.className = 'row disabled';
      div.innerHTML = `<div class="left"><div class="num">${ls.num}. dars yo'q</div></div><div class="rightLabel"></div>`;
      rowsContainer.appendChild(div);
    } else if(ls){
      const linkKey = `${ls.cls}|${(ls.subjKey || ls.sub || '').toString().toUpperCase()}`;
      const link = journalLinks[linkKey] || null;

      const div = document.createElement('div');
      div.className = 'row';
      div.innerHTML = `<div class="left"><div class="num">${ls.num}. ${ls.cls} â€º</div><div class="sub">${ls.sub}</div><div class="time">${ls.time || ''}</div></div><div class="rightLabel">${link ? 'ðŸ“˜ Jurnal â–¸' : ''}</div>`;

      if(link){
        div.addEventListener('click', ()=> {
          // visual pop: quick scale then open
          div.style.transform = 'scale(0.98)';
          setTimeout(()=>{ div.style.transform = ''; window.open(link, '_blank'); }, 160);
        });
      } else {
        div.classList.add('disabled');
      }
      rowsContainer.appendChild(div);
    }
  });
}

/* run on load */
document.addEventListener('DOMContentLoaded', renderToday);
</script>

</body>
</html>
